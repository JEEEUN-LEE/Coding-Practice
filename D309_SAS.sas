/*-----------------------------------------------------------
 SAS í™œìš© ë…¸í•˜ìš° - Outlier (ì´ìƒì¹˜ ì²˜ë¦¬)
-----------------------------------------------------------*/

/*ê·¹ë‹¨ê°’ì„  ì œê±°í•˜ëŠ” ê²ƒì€, ê·¹ë‹¨ì ì¸ ê°’ì´ ë°œìƒí•˜ëŠ” ìƒí™©ì˜ ë°ì´í„°ë¥¼ ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ê¸°ë„ í•˜ì—¬ íŠ¹ìˆ˜í•œ ìƒí™©ì„ ë¶„ì„í•˜ê¸° ìœ„í•´ì„  ì˜ˆìš‹ê°’ì„ ì œê±°í•˜ë©´ ì•ˆëœë‹¤
í‘œì¤€í¸ì°¨ì˜ ì¼ì • ë°°ìˆ˜ ì´ìƒ ë–¨ì–´ì§„ ê°’ì„ í‰ê· ê°’ì—ì„œ ì œê±°í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤ */

/*
 ğŸ”¹ ì¼ë°˜ì ì¸ ì´ìƒì¹˜ ì œê±° ë°©ë²•
   - í‰ê· ìœ¼ë¡œë¶€í„° í‘œì¤€í¸ì°¨(Standard Deviation)ì˜ ì¼ì • ë°°ìˆ˜ ì´ìƒ ë²—ì–´ë‚œ ê°’ì„ ì œì™¸.
   - ì˜ˆ: |x - í‰ê· | > 3 Ã— í‘œì¤€í¸ì°¨ â†’ ì´ìƒì¹˜ë¡œ íŒë‹¨.
*/


/*-----------------------------------------------------------
 1. ì˜ˆì‹œ ë°ì´í„° ì¤€ë¹„
-----------------------------------------------------------*/
data cars;
	set sashelp.cars;  /* SAS ë‚´ì¥ ë°ì´í„°ì…‹ ì‚¬ìš© */
run;


/*-----------------------------------------------------------
 2. í‰ê· ê³¼ í‘œì¤€í¸ì°¨ ê³„ì‚°
-----------------------------------------------------------*/
proc means data = cars mean std;
	var horsepower;  /* ë¶„ì„ ëŒ€ìƒ ë³€ìˆ˜ */
	output out = summary mean = mean_hp std = std_hp;
run;


/*-----------------------------------------------------------
 3. í‘œì¤€í¸ì°¨ 3ë°° ë²”ìœ„ ì´ì™¸ì˜ ê°’ ì œê±°í•˜ê¸°
-----------------------------------------------------------*/
data filtered_cars;
	merge cars summary;  /* ì›ë³¸ ë°ì´í„° + í†µê³„ ìš”ì•½ ë°ì´í„° ë³‘í•© */
	if abs(horsepower - mean_hp) <= 3 * std_hp then output;  /* í‰ê·  Â± 3SD ì´ë‚´ ê°’ë§Œ ì¶œë ¥ */
run;


/*-----------------------------------------------------------
 4. ê²°ê³¼ í™•ì¸
-----------------------------------------------------------*/
proc print data = filtered_cars;
run;